<h1 class="h4 titulo my-3">Order # {{ order.id }}</h1>
<div class="container">
  <div class="row">
    <div class="col-md-8">
      <div class="row pb-3">
        <!-- Customer Information Card -->
        <div class="card" style="width: 100%">
          <div class="card-header font-weight-bold">Customer Information</div>
          <div class="card-body">
            <div class="row mb-3">
              <!-- Customer ID field -->
              <div class="col-md-2">
                <label for="inputCustomerId">Customer ID</label>
                <input
                  type="number"
                  class="form-control"
                  id="inputCustomerId"
                  [ngModel]="order.userId"
                  [readonly]="true"
                />
              </div>
              <!-- First Name field -->
              <div class="col-md-3">
                <label for="inputFirstName">First Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="inputFirstName"
                  [ngModel]="order.userFirstName"
                  [readonly]="true"
                />
              </div>
              <!-- Last Name field -->
              <div class="col-md-3">
                <label for="inputLastName">Last Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="inputLastName"
                  [ngModel]="order.userLastName"
                  [readonly]="true"
                />
              </div>
              <!-- Email field -->
              <div class="col-md-4">
                <label for="inputEmail">Email</label>
                <input
                  type="text"
                  class="form-control"
                  id="inputEmail"
                  [ngModel]="order.userEmail"
                  [readonly]="true"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row pb-3">
        <!-- Delivery Details Card -->
        <div class="card" style="width: 100%">
          <div class="card-header font-weight-bold">Delivery Details</div>
          <div class="card-body">
            <div class="row mb-3">
              <!-- Addres field -->
              <div class="col-md-4">
                <label for="inputAddress">Address</label>
                <input
                  type="text"
                  class="form-control"
                  id="inputAddress"
                  [ngModel]="order.address"
                  [readonly]="true"
                />
              </div>
              <!-- Addres Number field -->
              <div class="col-md-3">
                <label for="inputAddressNumber">Address number</label>
                <input
                  type="number"
                  class="form-control"
                  id="inputAddressNumber"
                  [ngModel]="order.addressNumber"
                  [readonly]="true"
                />
              </div>
              <!-- City field -->
              <div class="col-md-3">
                <label for="inputCity">City</label>
                <input
                  type="text"
                  class="form-control"
                  id="inputCity"
                  [ngModel]="order.city"
                  [readonly]="true"
                />
              </div>
              <!-- State field -->
              <div class="col-md-2">
                <label for="inputState">State</label>
                <input
                  type="text"
                  class="form-control"
                  id="inputState"
                  [ngModel]="order.state"
                  [readonly]="true"
                />
              </div>
            </div>
            <div class="row mb-3">
              <!--Postal Code field -->
              <div class="col-md-4">
                <label for="inputPostalCode">Postal Code</label>
                <input
                  type="number"
                  class="form-control"
                  id="inputPostalCode"
                  [ngModel]="order.postalCode"
                  [readonly]="true"
                />
              </div>
              <!-- Order Date field -->
              <div class="col-md-4">
                <label for="inputOrderDate">Order Date</label>
                <input
                  type="text"
                  class="form-control"
                  id="inputOrderDate"
                  [ngModel]="order.orderDate | date: 'yyyy/MM/dd  HH:mm'"
                  datetime="yyyy-MM-dd"
                  [readonly]="true"
                />
              </div>
              <!-- Delivery Date field -->
              <div class="col-md-4">
                <label for="inputDeliveryDate">Delivery Date</label>
                <input
                  type="text"
                  class="form-control"
                  id="inputDeliveryDate"
                  [ngModel]="order.deliveryDate | date: 'yyyy/MM/dd'"
                  datetime="yyyy-MM-dd"
                  [readonly]="true"
                />
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row pb-3">
        <!-- Order Table with products -->
        <table class="table">
          <thead>
            <tr>
              <th>Product ID</th>
              <th></th>
              <th>Product</th>
              <th>Quantity</th>

              <th></th>
            </tr>
          </thead>
          <tbody *ngIf="order.orderItems.length == 0">
            <tr>
              <td></td>
              <td class="text-right">Your Shopping Cart is empty.</td>
            </tr>
          </tbody>
          <tbody *ngIf="order.orderItems.length != 0">
            <tr *ngFor="let p of order.orderItems">
              <td># {{ p.productId }}</td>
              <td class="d-flex justify-content-center">
                <img
                  *ngIf="p.fileName"
                  src="../../../../../files/{{ p.fileName }}"
                  style="width: 80px; height: 50px"
                />
                <img
                  *ngIf="!p.fileName"
                  style="width: 80px; height: 50px"
                  src="../../../../../files/fish-default.jpg"
                />
              </td>
              <td style="width: 50%">{{ p.name }}</td>
              <td>
                <input
                  type="number"
                  style="width: 70px"
                  class="form-control"
                  [readonly]="true"
                  [ngModel]="p.quantity"
                />
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="row d-flex justify-content-center">
        <button
          class="btn mb-3 btn-green"
          style="margin-right: 7px"
          [routerLink]="['/order-management']"
        >
          Back to Order Management
        </button>
      </div>
    </div>

    <div class="col-md-4">
      <div class="row px-3">
        <!-- Payment & Status Card -->
        <div class="card" style="width: 100%">
          <div class="card-header font-weight-bold">Payment & Status</div>
          <div class="card-body">
            <div class="row">
              <!-- Payment Method field -->
              <div class="col-md-12 mb-3">
                <label for="inputPaymentMethod">Payment Method</label>
                <input
                  type="text"
                  class="form-control"
                  id="inputPaymentMethod"
                  [ngModel]="order.paymentMethod"
                  [readonly]="true"
                />
              </div>
            </div>
            <div class="row mb-3">
              <!-- Order Total field -->
              <div class="col-md-12">
                <label for="inputTotal">Total ($)</label>
                <input
                  type="text"
                  class="form-control"
                  id="inputTotal"
                  [ngModel]="order.total"
                  [readonly]="true"
                />
              </div>
            </div>
            <!-- Order Status ComboBox -->
            <div class="row mb-3">
              <div class="col-md-12">
                <label for="inputOrderStatus">Order Status</label>
                <select
                  id="inputOrderStatus"
                  class="form-control"
                  [(ngModel)]="order.status"
                >
                  <option *ngFor="let s of statusCombo" [value]="s.value">
                    {{ s.text }}
                  </option>
                </select>
              </div>
            </div>

            <div class="row mx-5">
              <button
                type="button"
                class="btn btn-purple d-flex justify-content-center"
                style="width: 100%"
                (click)="updateOrderStatus()"
                [disabled]="spinner_activated"
              >
                <span
                  class="spinner-border spinner-border-sm"
                  role="status"
                  aria-hidden="true"
                  *ngIf="spinner_activated"
                ></span>
                <p class="ml-2 mb-0">Update Order Status</p>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
